"Arch Artificer":
    type: assignment
    interact scripts:
    - 10 Artificing
    actions:
        on assignment:
        - teleport npc <npc.anchor[archartificer]>
        - trigger name:proximity toggle:true
        - trigger name:chat toggle:true

"Arch Artificer Format":
    type: format
    format: "<dark_green>Arch Artificer<white><&co> <text>"

"Artificing":
    type: interact
    steps:
        "Player Seen*":
            proximity trigger:
                entry:
                    script:
                    - narrate "format:Arch Artificer Format" "Hello, adventurer! What can I help you with? I can take all of that magical experience you've earned from slaying monsters and crystallize it. A sliver will cost you 30 levels, a chunk will cost you 50, and a billet will cost you 70."
                exit:
                    script:
                    - narrate "format:Arch Artificer Format" "See you again, and good hunting!"
            chat trigger:
                'Sliver':
                    trigger: "I need a /Sliver/ of Crystallized Experience, please."
                    script:
                    - if <player.xp.level> >= 30
                    {
                        - narrate "format:Arch Artificer Format" "Sure thing, here you go!"
                        - mmcastplayer caster:<player.entity> skill:GiveCrystallizedExperienceSliver target:<player.entity>
                        - execute as_server "xp -30l <player.name>"
                    }
                    else
                    {
                        - narrate "format:Arch Artificer Format" "Sorry, you don't seem to have enough levels! Come back when you've got at least 30."
                    }
                'Chunk':
                    trigger: "I need a /Chunk/ of Crystallized Experience, please."
                    script:
                    - if <player.xp.level> >= 50
                    {
                        - narrate "format:Arch Artificer Format" "Sure thing, here you go!"
                        - mmcastplayer caster:<player.entity> skill:GiveCrystallizedExperienceChunk target:<player.entity>
                        - execute as_server "xp -50l <player.name>"
                    }
                    else
                    {
                        - narrate "format:Arch Artificer Format" "Sorry, you don't seem to have enough levels! Come back when you've got at least 50."
                    }
                'Billet':
                    trigger: "I need a /Billet/ of Crystallized Experience, please."
                    script:
                    - if <player.xp.level> >= 70
                    {
                        - narrate "format:Arch Artificer Format" "Sure thing, here you go!"
                        - mmcastplayer caster:<player.entity> skill:GiveCrystallizedExperienceBillet target:<player.entity>
                        - execute as_server "xp -70l <player.name>"
                    }
                    else
                    {
                        - narrate "format:Arch Artificer Format" "Sorry, you don't seem to have enough levels! Come back when you've got at least 70."
                    }
                'Bloom':
                    trigger: "I need a /Bloom/ of Crystallized Experience, please."
                    script:
                    - if <player.xp.level> >= 90
                    {
                        - narrate "format:Arch Artificer Format" "Sure thing, here you go!"
                        - mmcastplayer caster:<player.entity> skill:GiveCrystallizedExperienceBloom target:<player.entity>
                        - execute as_server "xp -90l <player.name>"
                    }
                    else
                    {
                        - narrate "format:Arch Artificer Format" "Sorry, you don't seem to have enough levels! Come back when you've got at least 90."
                    }
                'Ingot':
                    trigger: "I need a /Ingot/ of Crystallized Experience, please."
                    script:
                    - if <player.xp.level> >= 110
                    {
                        - narrate "format:Arch Artificer Format" "Sure thing, here you go!"
                        - mmcastplayer caster:<player.entity> skill:GiveCrystallizedExperienceIngot target:<player.entity>
                        - execute as_server "xp -110l <player.name>"
                    }
                    else
                    {
                        - narrate "format:Arch Artificer Format" "Sorry, you don't seem to have enough levels! Come back when you've got at least 110."
                    }